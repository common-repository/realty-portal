!function(e){"use strict";const t=e(".rp-gmap");t.length>0&&t.each(function(){function t(){l=new google.maps.Map(document.getElementById(p),{flat:!1,noClear:!1,zoom:b,scrollwheel:!1,draggable:c,disableDefaultUI:!1,center:new google.maps.LatLng(w,P),mapTypeId:google.maps.MapTypeId.ROADMAP}),l.setZoom(b),google.maps.visualRefresh=!0;var e=new google.maps.LatLng(w,P);a(l,e);var t=new google.maps.InfoWindow,o=new google.maps.Marker({map:l,anchorPoint:new google.maps.Point(0,0)}),n={content:document.createElement("div"),disableAutoPan:!0,maxWidth:500,boxClass:"rp-property-item-map-wrap",zIndex:null,infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1};if(i=new InfoBox(n),M){var s=document.getElementById("rp-field-item-address");if("undefined"!=typeof s&&""!==s&&null!==s){var d={types:[R]},g=new google.maps.places.Autocomplete(s,d);"all"===L?g.setComponentRestrictions([]):g.setComponentRestrictions({country:L}),g.bindTo("bounds",l),g.addListener("place_changed",function(){t.close(),o.setVisible(!1);var e=g.getPlace();return e.geometry?(e.geometry.viewport?l.fitBounds(e.geometry.viewport):l.setCenter(e.geometry.location),o.setPosition(e.geometry.location),o.setVisible(!0),e.address_components&&r(l,e.geometry.location,!0),void 0):(window.alert("Autocomplete's returned place contains no geometry"),void 0)})}}google.maps.event.addListener(l,"click",function(e){i.close(),r(l,e.latLng,!0)})}function a(e,t){o(),r(e,t,!1)}function o(){for(var e=0;e<k.length;e++)k[e].setMap(null);k=[]}function r(t,a,r){var l=new google.maps.Geocoder;o(),l.geocode({location:a},function(o,l){if("OK"===l)if(o[1]){var s=new Marker({position:a,map:t});k.push(s);var p=new google.maps.LatLngBounds;if(p.extend(a),t.fitBounds(p),t.setZoom(b),"undefined"!=typeof d){var c={url:g,title:m,image:u,rp_property_area:f,rp_property_bedrooms:_,rp_property_bathrooms:v,rp_property_garages:y,price_html:h};i.setContent(n(c))}else i.setContent("<strong>Latitude:</strong> "+a.lat()+"<br /><strong>Longitude:</strong> "+a.lng());if(i.open(t,s),!r)return;var w=o[1].address_components,P=!1,M=!1,L=!1,R=!1;e.each(w,function(t,a){if("undefined"!=typeof a.types[0])switch(a.types[0]){case"country":e("option[value="+a.short_name+"]").attr("selected",!0);break;case"locality":e("#rp-field-item-city").val(a.long_name),P=!0;break;case"neighborhood":e("#rp-field-item-neighborhood").val(a.long_name),M=!0;break;case"postal_code":e("#rp-field-item-zip").val(a.long_name),L=!0;break;case"administrative_area_level_1":e("#rp-field-item-state").val(a.long_name),R=!0}}),P||e("#rp-field-item-city").val(""),M||e("#rp-field-item-neighborhood").val(""),R||e("#rp-field-item-state").val(""),L||e("#rp-field-item-zip").val(""),e("#rp-field-item-latitude").val(a.lat()),e("#rp-field-item-longitude").val(a.lng())}else window.alert(RP_Map.no_results);else window.alert(RP_Map.geo_fail+l)})}function n(e){return'<div class="rp-property-item-map"><div class="rp-thumbnail"><a target="_blank" href="'+e.url+'" title="'+e.title+'"><img src="'+e.image+'" alt="'+e.title+'" /></a></div><div class="rp-content"><h4 class="rp-content-title"><a target="_blank" href="'+e.url+'" title="'+e.title+'">'+e.title+'</a></h4><div class="rp-info"><span class="rp-area"><i class="rp-icon-ruler"></i>'+e.rp_property_area+'</span><span class="rp-bed"><i class="rp-icon-bed"></i>'+e.rp_property_bedrooms+'</span><span class="rp-bath"><i class="rp-icon-bath"></i>'+e.rp_property_bathrooms+'</span><span class="rp-storage"><i class="rp-icon-garage"></i>'+e.rp_property_garages+'</span></div><div class="rp-action"><div class="rp-price">'+e.price_html+'</div><a class="more" target="_blank" href="'+e.url+'" title="'+e.title+'"><i class="rp-icon-plus" aria-hidden="true"></i></a></div></div></div><!-- /.rp-property-item-map -->'}var i,l,s=e(this),p=s.data("id"),d=s.data("property_id"),c=s.data("drag_map")||!0,g=(s.data("fitbounds"),s.data("url")),m=s.data("title"),u=s.data("image"),f=s.data("area"),v=s.data("bathrooms"),_=s.data("bedrooms"),y=s.data("garages"),h=s.data("price_html"),b=parseInt(RP_Map.zoom),w=parseFloat(RP_Map.lat),P=parseFloat(RP_Map.lng),M=RP_Map.enable_auto_complete,L=RP_Map.country_restriction,R=RP_Map.location_type,k=[],I=e("#latitude").val(),C=e("#longitude").val();"undefined"!=typeof I&&""!==I&&(w=I),"undefined"!=typeof C&&""!==C&&(P=C);var B=jQuery("#rp-field-item-latitude").val(),x=jQuery("#rp-field-item-longitude").val();"undefined"!=typeof B&&""!==B&&(w=parseFloat(B)),"undefined"!=typeof x&&""!==x&&(P=parseFloat(x)),google.maps.event.addDomListener(window,"load",t)})}(jQuery);